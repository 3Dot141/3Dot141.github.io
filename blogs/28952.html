<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
































<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-medium-self.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-small-self.png?v=6.6.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#222">









<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.6.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="六月磨一剑，剑出试青锋。这是对6个月里，关于网络基础知识做一个大的总结，能力有限，不是很深入，希望大家包涵。 ------ 1米88的大可爱？3dot141">
<meta name="keywords" content="interview">
<meta property="og:type" content="article">
<meta property="og:title" content="逐梦offer -- 网络基础知识总结">
<meta property="og:url" content="https://3dot141.com/blogs/28952.html">
<meta property="og:site_name" content="killCode">
<meta property="og:description" content="六月磨一剑，剑出试青锋。这是对6个月里，关于网络基础知识做一个大的总结，能力有限，不是很深入，希望大家包涵。 ------ 1米88的大可爱？3dot141">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-08-26T15:53:42.714Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="逐梦offer -- 网络基础知识总结">
<meta name="twitter:description" content="六月磨一剑，剑出试青锋。这是对6个月里，关于网络基础知识做一个大的总结，能力有限，不是很深入，希望大家包涵。 ------ 1米88的大可爱？3dot141">






  <link rel="canonical" href="https://3dot141.com/blogs/28952.html">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>逐梦offer -- 网络基础知识总结 | killCode</title>
  












  <noscript>
  <style>
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion .logo-line-before i { left: initial; }
    .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">killCode</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags<span class="badge">12</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-code">

    
    
    
      
    

    
      
    

    <a href="/categories/Code" rel="section"><i class="menu-item-icon fa fa-fw fa-code"></i> <br>code</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-live">

    
    
    
      
    

    
      
    

    <a href="/categories/Live" rel="section"><i class="menu-item-icon fa fa-fw fa-superscript"></i> <br>live</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-essay">

    
    
    
      
    

    
      
    

    <a href="/categories/Essay" rel="section"><i class="menu-item-icon fa fa-fw fa-coffee"></i> <br>essay</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://3dot141.com/blogs/28952.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="3Dot141">
      <meta itemprop="description" content="Nothing is impossible to a willing heart.">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="killCode">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">逐梦offer -- 网络基础知识总结

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-10-17 00:00:00" itemprop="dateCreated datePublished" datetime="2017-10-17T00:00:00+08:00">2017-10-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-26 23:53:42" itemprop="dateModified" datetime="2019-08-26T23:53:42+08:00">2019-08-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Code/" itemprop="url" rel="index"><span itemprop="name">Code</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blogs/28952.html#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments: </span> <span class="post-comments-count valine-comment-count" data-xid="/blogs/28952.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/blogs/28952.html" class="leancloud_visitors" data-flag-title="逐梦offer -- 网络基础知识总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count: </span>
                
                <span title="Words count">9.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">One coffee &asymp;</span>
                
                <span title="One coffee">16 mins.</span>
              
            </div>
          

          
              <div class="post-description">六月磨一剑，剑出试青锋。这是对6个月里，关于网络基础知识做一个大的总结，能力有限，不是很深入，希望大家包涵。 ------ 1米88的大可爱？3dot141</div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-网络基础"><a href="#1-网络基础" class="headerlink" title="1. 网络基础"></a>1. 网络基础</h2><h3 id="1-1-OSI-7层模型-与-TCP-IP-四层模型"><a href="#1-1-OSI-7层模型-与-TCP-IP-四层模型" class="headerlink" title="1.1 OSI 7层模型 与 TCP/IP 四层模型"></a>1.1 OSI 7层模型 与 TCP/IP 四层模型</h3><p>OSI 7层模型</p>
<ol>
<li>物理层：负责 0，1 比特流与电压高低、光的闪灭之间的互换<br> 设备： 中继器：将电缆传过来的电信号与光信号经中继器的波形调整与放大传给另一个。</li>
<li>数据链路层： 负责数据帧与比特流的转换<br> 设备： 网桥：通过 MAC 地址连接两个网络。通过CRC（cyclic redundancy check 循环冗余校验）的方式对数据链路层中的 FCS（frame check sequence) 验证。从而确保数据的完整性。</li>
<li>网络层：负责寻址与路由的选择<br> 设备： 路由器：根据IP 地址进行处理。</li>
<li>传输层：管理两个节点之间数据的传输。确保数据被可靠的传送到目标地址，检测是否有数据丢失。</li>
<li>会话层：负责建立和断开通信连接</li>
<li>表示层：负责数据格式的转换</li>
<li>应用层：针对特定应用的协议<br> 4-7层交换机<br> 网关：负责从传输层到应用层的数据进行转换和转发的设备。</li>
</ol>
<p>TCP/IP 四层模型<br>包为描述数据的全能型单位。</p>
<ul>
<li>网络接口层<br>  单位：帧<br>  <strong>相关技术：</strong> <ul>
<li>MAC 地址: 使用网卡(NIC) , 有唯一性</li>
<li>共享介质型网络：半双工通信，只发送或只接收的方式<br>1、争用方式（CSMA （carrier sense multiple access) - 载波监听多路访问）<br>2、令牌传递方式</li>
<li>非共享介质型网络：双工通信<br>每个站直连交换机，由交换机负责转发数据帧。</li>
<li>以太网帧格式： MAC(介质访问控制层)+LLC(逻辑链路控制层)+SNAP+IP+TCP+上层数据+FCS</li>
</ul>
</li>
<li>网络层<br>  协议：IP / ICMP / ARP（Address Resolution Protocol) / NAT / DHCP / DNS<br>  <strong>相关技术：</strong><ul>
<li>Hop : 数据链路层以下分层的传输数据帧的一个区间。是主机或路由器网卡不经其他路由器而能直接到达的对象之间的一个区间。</li>
<li>MTU (Maximum Transmission Unit): 最大传输单位</li>
<li>ARP : 通过 IP 地址 得到 MAC 地址 – RARP ： MAC 得到 IP</li>
<li>ICMP ：确认网络的正常使用，以及异常的排查<br>  消息类型：<br>  类型3 ：目标不可达<br>  类型5 ：重定向<br>  类型11 ：超时<br>  <strong>TTL Time To Live 防止IP 包无限制的传递下去</strong><br>  类型0 ：向对方发送消息<br>  类型8 ：接收对方发送的消息<br>  ping 命令就是 类型0、8 。</li>
<li>NAT(Network Adddress Translator) : 由本地网络中的私有地址转换为全局 IP 地址。</li>
<li>DNS ：域名命名系统 – 使用 TCP 53号端口</li>
<li>DHCP ：动态域名控制协议 </li>
<li>路由控制 </li>
</ul>
</li>
<li>传输层<br>  协议：TCP / UDP</li>
<li>应用层<br>  协议：WWW / HTTP / MIME，SMTP、POP、IMPA / FTP / TELNET - SSH / SNMP<br>  <strong>相关技术：</strong><ul>
<li>FTP ：用两条 TCP 连接：<br>  1、数据控制 ， 使用 21号端口<br>  2、数据传输 ， 使用 20号端口<br>  3、状态码： 1-提供信息，2-连接管理，3-用户相关，4-错误，5-文件系统</li>
<li>HTTP : 使用 80 端口<br>  1、 主要命令：GET.PUT.POST.DELETE.OPTIONS.HEAD.TRACE<br>  2、 状态码： 1-提供信息，2-肯定应答，3-重写向请求，4-客户端请求内容错误，5-服务器错误</li>
<li>HTTPS : 使用 443 端口</li>
</ul>
</li>
</ul>
<h3 id="1-2-TCP-UDP"><a href="#1-2-TCP-UDP" class="headerlink" title="1.2 TCP / UDP"></a>1.2 TCP / UDP</h3><p>SYN (Synchronize Flag) ACK(Acknowledgement Flag) FIN(Fin Flag)<br>TCP 的三次握手</p>
<ol>
<li>客户端 –》 SYN</li>
<li>SYN ACK 《– 服务器</li>
<li>客户端 –》SYN</li>
</ol>
<p>四次挥手</p>
<ol>
<li>客户端 –》 FIN</li>
<li>ACK 《– 服务器</li>
<li>FIN 《– 服务器</li>
<li>客户端 –》 ACK</li>
</ol>
<p>MSS(Maximum Segment Size) 最大消息长度：由三次握手的时候，两端主机会在TCP首部写入 MSS 长度，通过比较，取得其中比较少的值</p>
<p>窗口控制<br>原先的缺点：TCP 以一个段为单位，每发一个段进行一次确认应答的处理。包的往返时间越长，通信性能越低。<br>因此引入窗口这个概念。窗口大小是指无需等待确认应答，而可以继续发送数据的最大值。<br>使用大量的缓冲区，如果有部分数据丢包，发送端主机设置缓存保留这些数据，直至收到它们的确认应答。<br>如果没有丢包，就滑动窗口到下一个位置</p>
<p>重发控制<br>窗口在一定程度上较大时，即使有少部分的确认应答丢失也不会进行数据重发。可以通过下一个确认应答确认。<br>当某一报文段丢失后，发送端会一直收到序号为原数据的确认应答。连续 3 次 同一个确认应答，会进行重发</p>
<p>流控制<br>TCP 首部中有专门的字段用来通知窗口的大小<br>接收主机将自己可以接收的缓冲区大小放入这个字段中通知给发送端，这个字段的值越大，说明网络的吞吐量越高</p>
<p>拥塞控制<br>慢启动：通过拥塞窗口，第一次大小为 <strong>1 MSS</strong> ， 以后每次 收到一次确认应答（ACK）,拥塞窗口的值 加 1.<br>然后比较 两端 窗口的 大小，发送比小值还的小的数。</p>
<h3 id="1-3-路由协议"><a href="#1-3-路由协议" class="headerlink" title="1.3 路由协议"></a>1.3 路由协议</h3><ul>
<li>静态路由 与 动态路由</li>
<li>AS (Autonomous System) 与 路由选择域(Routing Domain)<br>  内部使用 IGP (Interior Gateway Protocol) 外部使用 EGP (Exterior Gateway Protocol).</li>
<li>IGP 中可以使用 RIP (Routing Information Protocol) , OSPF(Open Shortest Path First);<ul>
<li>RIP – 距离向量(Distance-Vector)协议:通过距离与方向决定目标网络或主机位置。</li>
<li>OSPF – 链路状态(Link-State)协议：了解网络整体连接状态的基础上生成路由控制表。<br>  将每条链路赋予一个权重，采用 <strong>Dijkstra 算法(最短路径优先算法)</strong>生成相应的路由控制表。<br>  权重，是通过 HELLO 协议， <strong>HELLO</strong>包在LAN中传递，<strong>3 次</strong>以上空等后，使用<strong>链路状态更新包(Link state update package) </strong>通知状态的改变。<br>  链路状态更新包 传达 ： 网络 LSA(Link State Advertisement 链路状态通告) , 路由器 LSA 信息。 从而让 路由器生成<strong>链路状态数据库</strong>。</li>
</ul>
</li>
<li>EGP 中使用 BGP(Border Gateway Protocol)<ul>
<li>BGP – 路径向量(Path-Vector)协议：</li>
</ul>
</li>
<li>总结 ：  路由选择时的度量 ， RIP表现为 路由器个数， OSPF则是每个子网的成本， BGP 为 AS 的个数。</li>
</ul>
<h3 id="1-4-HTTP"><a href="#1-4-HTTP" class="headerlink" title="1.4 HTTP"></a>1.4 HTTP</h3><h4 id="1-get与post"><a href="#1-get与post" class="headerlink" title="1. get与post"></a>1. get与post</h4><p>Http 定义了服务器交互的不同方法 ，最基本的有四种 ：GET查, POST改,PUT增,DELETE删。</p>
<ol>
<li>get一般用于信息获取，是安全与幂等的。<br> 安全指。该操作用于获取信息，所以不会对数据有什么破坏。<br> 幂等意味着 对同一URL 的多个请求返回同样的结果。</li>
<li>post表示可能修改服务器上的资源的请求。</li>
</ol>
<p>区别：</p>
<ol>
<li>GET请求的数据会附在URL之后，以 ？分割URL和传输数据，参数之间用&amp;相连。<br> post 方式则是将提交的数据放置在 HTTP 包的 包体中。</li>
<li>GET方式提交的数据有限制，是因为特定的浏览器及服务器对它的限制，URL不存在参数上限的问题。HTTP规范中并没有对URL长度进行限制。<br> post方式提交的大小是没有限制的，限制的是服务器的处理程序的处理能力。</li>
<li>POST比GET 提交的安全性高，是因为GET提交数据，用户名和密码是明文出现在URL上，POST数据是隐藏到HTTP包的包体中的。抓包时，仍然可以看见。</li>
</ol>
<h4 id="2-session与cookie"><a href="#2-session与cookie" class="headerlink" title="2. session与cookie"></a>2. session与cookie</h4><p>HTTP协议 （ <a href="http://www.w3.org/Protocols/" target="_blank" rel="noopener">http://www.w3.org/Protocols/</a> ）是“一次性单向”协议。<br>服务端不能主动连接客户端，只能被动等待并答复客户端请求。客户端连接服务端，发出一个HTTP Request，服务端处理请求，并且返回一个HTTP Response给客户端，本次HTTP Request-Response Cycle结束。<br>Session ID实际上是在客户端和服务端之间通过HTTP Request和HTTP Response传来传去的。</p>
<ol>
<li>Session对象在浏览器中的有效范围：<br>IE中:<ol>
<li>Session对象只在建立Session对象的窗口中有效。</li>
<li>在建立Session对象的窗口中新开链接的窗口也有效。<br>Session只会在内存中，他会随着IE窗口的关闭而死亡。<br>也就是说单用seesion是不会有产生自动登入的效果的。</li>
</ol>
</li>
<li>Cookie 是在服务器给客户端IE一个命令后在客户端产生并存的，<br>它可以存放用户信息，存到客户端硬盘上，在COOKIE记录被删除<br>或者失效日期之前，就可以实现自动登入的现象。</li>
<li>Session 和 Cookie 是不同的，但是他们确实是相关的。<br>当打开IE登入后，会向服务器发出一个指令请求SESSIONID以<br>及页面内容，服务器会返回页面内容和一个没有被使用的<br>SESSIONID让此IE使用，当时IE就对返回SESSIONID做存储；而当此IE再访问任何这个站点的JSP程序的时候,都会给服务器这个 SESSIONID，来确认客户端的身份。（在没有Cookie 的情况下session死亡 SESSIONID被取消就需要重新登入）</li>
</ol>
<h4 id="3-http-与-https-的区别"><a href="#3-http-与-https-的区别" class="headerlink" title="3. http 与 https 的区别"></a>3. http 与 https 的区别</h4><h5 id="一、HTTP"><a href="#一、HTTP" class="headerlink" title="一、HTTP"></a>一、HTTP</h5><p>1.支持客户/服务器模式。<br>2.简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。<br>3.灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。<br>4.无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。<br>5.无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。</p>
<p>1) HTTP协议详解之请求篇</p>
<blockquote>
<p>http请求由三部分组成，分别是：<strong>请求行、消息报头、请求正文</strong><br>    1、请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本，格式如下：<br>        <strong>Method Request-URI HTTP-Version CRLF</strong><br>    其中 Method表示请求方法；Request-URI是一个统一资源标识符；HTTP-Version表示请求的HTTP协议版本；CRLF表示回车和换行（除了作为结尾的CRLF外，不允许出现单独的CR或LF字符）。<br>    请求方法（所有方法全为大写）有多种，各个方法的解释如下：<br>        GET　　　　请求获取Request-URI所标识的资源<br>        POST　　　 在Request-URI所标识的资源后附加新的数据<br>        HEAD　　　 请求获取由Request-URI所标识的资源的响应消息报头<br>        PUT　　　　 请求服务器存储一个资源，并用Request-URI作为其标识<br>        DELETE　　 请求服务器删除Request-URI所标识的资源<br>        TRACE　　  请求服务器回送收到的请求信息，主要用于测试或诊断<br>        CONNECT　 保留将来使用<br>        OPTIONS　  请求查询服务器的性能，或者查询与资源相关的选项和需求<br>    2、请求报头后述<br>    3、请求正文(略) </p>
</blockquote>
<p>2) HTTP协议详解之响应篇</p>
<blockquote>
<p>在接收和解释请求消息后，服务器返回一个HTTP响应消息。<br>    HTTP响应也是由三个部分组成，分别是：状态行、消息报头、响应正文<br>    1、状态行格式如下：<br>    <strong>HTTP-Version Status-Code Reason-Phrase CRLF</strong><br>    其中，HTTP-Version表示服务器HTTP协议的版本；Status-Code表示服务器发回的响应状态代码；Reason-Phrase表示状态代码的文本描述。<br>    状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：<br>    1xx：指示信息–表示请求已接收，继续处理<br>    2xx：成功–表示请求已被成功接收、理解、接受<br>    3xx：重定向–要完成请求必须进行更进一步的操作<br>    4xx：客户端错误–请求有语法错误或请求无法实现<br>    5xx：服务器端错误–服务器未能实现合法的请求<br>    常见状态代码、状态描述、说明：<br>    200 OK      //客户端请求成功<br>    400 Bad Request  //客户端请求有语法错误，不能被服务器所理解<br>    401 Unauthorized //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用<br>    403 Forbidden  //服务器收到请求，但是拒绝提供服务<br>    404 Not Found  //请求资源不存在，eg：输入了错误的URL<br>    500 Internal Server Error //服务器发生不可预期的错误<br>    503 Server Unavailable  //服务器当前不能处理客户端的请求，一段时间后可能恢复正常<br>    eg：HTTP/1.1 200 OK （CRLF）<br>    2、响应报头后述<br>    3、响应正文就是服务器返回的资源的内容 </p>
</blockquote>
<p>3) HTTP协议详解之消息报头篇</p>
<blockquote>
<p>HTTP消息报头包括普通报头、请求报头、响应报头、实体报头。</p>
</blockquote>
<table>
<thead>
<tr>
<th>普通报头</th>
<th>请求报头</th>
<th>响应报头</th>
<th>实体报头</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cache-Control</td>
<td>Accept</td>
<td>Location(重定向)</td>
<td></td>
</tr>
<tr>
<td>Date</td>
<td>Accept-Charset</td>
<td>Server（服务器用来处理软件的信息</td>
<td></td>
</tr>
<tr>
<td>Connection</td>
<td>Accept-Encoding</td>
<td></td>
<td>Content-Encoding</td>
</tr>
<tr>
<td></td>
<td>Accept-Language</td>
<td></td>
<td>Content-Language</td>
</tr>
<tr>
<td></td>
<td>Authorization</td>
<td>WWW-Authenticate</td>
<td>Content-Type</td>
</tr>
<tr>
<td></td>
<td>Host</td>
<td></td>
<td>Last-Modified</td>
</tr>
<tr>
<td></td>
<td>User-Agent</td>
<td></td>
<td>Expires</td>
</tr>
</tbody>
</table>
<h5 id="二、HTTPS"><a href="#二、HTTPS" class="headerlink" title="二、HTTPS"></a>二、HTTPS</h5><p>　　HTTPS（Hypertext Transfer Protocol over Secure Socket Layer，基于SSL的HTTP协议）使用了HTTP协议，但HTTPS使用不同于HTTP协议的默认端口及一个加密、身份验证层（HTTP与TCP之间）。提供了身份验证与加密通信方法，现在它被广泛用于互联网上安全敏感的通信。<br>　　客户端在使用HTTPS方式与Web服务器通信时有以下几个步骤。<br>（1）客户使用https的URL访问Web服务器，要求与Web服务器建立SSL连接。<br>（2）Web服务器收到客户端请求后，会将网站的证书信息（证书中包含公钥）传送一份给客户端。<br>（3）客户端的浏览器与Web服务器开始协商SSL连接的安全等级，也就是信息加密的等级。<br>（4）客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。<br>（5）Web服务器利用自己的私钥解密出会话密钥。<br>（6）Web服务器利用会话密钥加密与客户端之间的通信。</p>
<h3 id="1-5-RESTful（Representational-State-Transfer"><a href="#1-5-RESTful（Representational-State-Transfer" class="headerlink" title="1.5 RESTful（Representational State Transfer)"></a>1.5 RESTful（Representational State Transfer)</h3><p>（1）每一个URI代表一种资源；<br>（2）客户端和服务器之间，传递这种资源的某种表现层；<br>（3）客户端通过四个HTTP动词，对服务器端资源进行操作，实现”表现层状态转化”。</p>
<blockquote>
<p>(1)客户-服务器：客户-服务器约束背后的原则是分离关注点。通过分离用户接口和数据存储这两个关注点，改善了用户接口跨多个平台的可移植性；同时通过简化服务器组件，改善了系统的可伸缩性。<br>    (2)无状态：通信在本质上是无状态的，改善了可见性、可靠性、可伸缩性.<br>    (3)缓存：改善了网络效率减少一系列交互的平均延迟时间，来提高效率、可伸缩性和用户可觉察的性能。<br>    (4)统一接口：REST架构风格区别于其他基于网络的架构风格的核心特征是，它强调组件之间要有一个统一的接口。</p>
</blockquote>
<h3 id="1-6-网络安全"><a href="#1-6-网络安全" class="headerlink" title="1.6 网络安全"></a>1.6 网络安全</h3><h4 id="1-CSRF-Cross-Site-Request-Forgeries"><a href="#1-CSRF-Cross-Site-Request-Forgeries" class="headerlink" title="1. CSRF (Cross-Site Request Forgeries)"></a>1. CSRF (Cross-Site Request Forgeries)</h4><p>csrf 跨站点请求伪造 ： 冒充用户发起请求。<br>本质：通过已经认证的用户权限搞事情。<br><strong>模拟攻击：</strong> user – webA – webB</p>
<ol>
<li>user 浏览 webA</li>
<li>webA 上发送给 user 一个 cookie </li>
<li>user 浏览 webB</li>
<li>webB 要求 user 访问 webA</li>
<li>user 此时带着 cookie 访问 webA</li>
<li><p>cookie 验证合格，所以 webB 可以 通过 user 的权限操控 webA</p>
<blockquote>
<p>与 xss 区别：<br>通常来说 CSRF 是由 XSS 实现的，CSRF 时常也被称为 XSRF（CSRF 实现的方式还可以是直接通过命令行发起请求等）。<br>本质上讲，XSS 是代码注入问题，CSRF 是 HTTP 问题。XSS 是内容没有过滤导致浏览器将攻击者的输入当代码执行。CSRF 则是因为浏览器在发送 HTTP 请求时候自动带上 cookie，而一般网站的 session 都存在 cookie里面。</p>
</blockquote>
</li>
</ol>
<h4 id="2-XSS-Cross-Site-Scripting"><a href="#2-XSS-Cross-Site-Scripting" class="headerlink" title="2. XSS (Cross Site Scripting)"></a>2. XSS (Cross Site Scripting)</h4><p>xss 跨站脚本攻击 ： 通过注入非法的 html 标签 以及 javascript 代码，从而当用户浏览网页时，控制用户的浏览器</p>
<p>xss 主要分为三类：</p>
<ol>
<li>DOM xss :<br>DOM即文本对象模型，DOM通常代表在html、xhtml和xml中的对象，使用DOM可以允许程序和脚本动态的访问和更新文档的内容、结构和样式。它不需要服务器解析响应的直接参与，触发XSS靠的是浏览器端的DOM解析，可以认为完全是客户端的事情。</li>
<li>反射型 xss :<br>反射型XSS也被称为非持久性XSS，是现在最容易出现的一种XSS漏洞。发出请求时，XSS代码出现在URL中，最后输入提交到服务器，服务器解析后在响应内容中出现这段XSS代码，最后浏览器解析执行。</li>
<li>存储型 xss :<br>存储型XSS又被称为持久性XSS，它是最危险的一种跨站脚本，相比反射型XSS和DOM型XSS具有更高的隐蔽性，所以危害更大，因为它不需要用户手动触发。 允许用户存储数据的web程序都可能存在存储型XSS漏洞，当攻击者提交一段XSS代码后，被服务器端接收并存储，当所有浏览者访问某个页面时都会被XSS，其中最典型的例子就是留言板。</li>
</ol>
<p>跨站脚本攻击可能造成以下影响：</p>
<ol>
<li>利用虚假输入表单骗取用户个人信息。</li>
<li>利用脚本窃取用户的 Cookie 值，被害者在不知情的情况下，帮助攻击者发送恶意请求。</li>
<li>显示伪造的文章或图片。</li>
</ol>
<p>防御：</p>
<ul>
<li>httpOnly: 在cookie 中设置 HttpOnly ,使得 js 脚本无法读取到 cookie 信息。</li>
<li>过滤 ：<ul>
<li>输入检查</li>
<li>HtmlEncode : 对一些标签进行转化，将之转化为文本内容，而非一段可以执行的代码</li>
<li>JavaScriptEncode : 对一些字符加上反斜杠</li>
</ul>
</li>
</ul>
<h4 id="3-DDos"><a href="#3-DDos" class="headerlink" title="3. DDos"></a>3. DDos</h4><p>因为自己没有这方面的经验与系统的学习，所以就大概了解了一下，没有过多的分析。<br><a href="https://www.leiphone.com/news/201509/9zGlIDvLhwguqOtg.html" target="_blank" rel="noopener">漫画告诉你什么是DDoS攻击？</a><br><a href="http://blog.csdn.net/huwei2003/article/details/45476743" target="_blank" rel="noopener">DDoS的攻击原理与防御方法</a></p>
<h3 id="1-7-socket编程"><a href="#1-7-socket编程" class="headerlink" title="1.7 socket编程"></a>1.7 socket编程</h3><p><a href="https://3dot141.cn/blogs/1.html" target="_blank" rel="noopener">过去整理过，请点这里的这么明显的清楚的链接</a></p>
<h3 id="1-8-补充"><a href="#1-8-补充" class="headerlink" title="1.8 补充"></a>1.8 补充</h3><p>在论坛上看到一个问题：<br><strong><a href="http://bbs.51cto.com/thread-821402-1-1.html" target="_blank" rel="noopener">ICMP 用的什么端口？</a></strong><br>有人是这么回答的，ICMP在网络层协议，不是用端口来说的，它的功能用类型来区别。</p>
<blockquote>
<p>重点是下面这些消息类型，可以防止 <strong>DDoS</strong> 攻击 , 所以补充一下 .<br>Echo Request和Reply（类型8和0）：<br>　　允许Echo Request消息出站以便于内部用户能够PING一个远程主机。阻止入站Echo Request和出站Echo Reply可以防止外部网络的主机对内部网络进行扫描。如果您使用了位于外部网络的监视器来监视内部网络，就应该只允许来自于特定外部IP的Echo Request进入您的网络。限制ICMP Echo包的大小可以防止“Ping Floods”攻击，并且可以阻止那些利用Echo Request和Reply来“偷运”数据通过防火墙的木马程序。<br>Destination unreachable （类型3）：<br>　　允许其入站以便于内部网用户可以使用traceroute。需要注意的是，有些攻击者可以使用它来进行针对会话的DoS攻击，如果您曾经历过类似的攻击，也可以阻止它。阻止出站的ICMP Destination unreachable消息，因为它可能会泄漏内部网络的结构。不过有一个例外，对于那些允许外部网络通过TCP访问的内部主机（如位于DMZ区的Web 服务器）发出的Destination unreachable，则应该允许它通过。为了能够支持“Path MTU Discovery”，您应该允许出站的“Packet Too Big”消息（类型3，代码4）到达那些主机。<br>Source quench（类型4）：<br>　　阻止其入站，因为它可以作为一种DoS攻击，能够降低发送者的发送速度。允许其出站以便于内部主机能够控制发送端发送数据的速度。有些防火墙会忽略所有直接发送到防火墙端口的Source Quench消息，以防止针对于防火墙的DoS攻击。<br>Redirect（类型5，9，10）：<br>　　Redirect、Router announcement、 Router selection（类型5，9，10）：这些消息都存在潜在危险，因为它们可以用来把数据重定向到攻击者的机器。这些消息都应该被阻止。<br>TTL exceeded（类型11）：<br>　　允许其进站以便于内部用户可以使用traceroute。“firewalking”使用很低的TTL值来对网络进行扫描，甚至可以通过防火墙对内网进行扫描，所以应该禁止其出站。一些防火墙可以阻止TTL值小于设定值的数据包进入防火墙。<br>Parameter problem（类型12）：<br>　　禁止其入站和出站。通过使用一个能够进行数据包一致性检查的防火墙，错误和恶意的数据包都会被阻塞。</p>
</blockquote>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>都看到这里了，点个关注好不啦。<br>你的关注，是我最大的动力哦。<br>不定期干货更新。<br>一只相当程序员的1米88<strong>处女座</strong>大可爱。</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/interview/" rel="tag"># interview</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blogs/25914.html" rel="next" title="逐梦offer -- JVM知识总结">
                <i class="fa fa-chevron-left"></i> 逐梦offer -- JVM知识总结
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blogs/3152.html" rel="prev" title="killBase系列 -- 密码学">
                killBase系列 -- 密码学 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="3Dot141">
            
              <p class="site-author-name" itemprop="name">3Dot141</p>
              <p class="site-description motion-element" itemprop="description">Nothing is impossible to a willing heart.</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">69</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/3Dot141" title="GitHub &rarr; https://github.com/3Dot141" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://segmentfault.com/u/allen233" title="Segmentfault &rarr; https://segmentfault.com/u/allen233" rel="noopener" target="_blank"><i class="fa fa-fw fa-fire"></i>Segmentfault</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://juejin.im/user/57e5ce4c128fe10057fe296e" title="Juejin &rarr; https://juejin.im/user/57e5ce4c128fe10057fe296e" rel="noopener" target="_blank"><i class="fa fa-fw fa-circle"></i>Juejin</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://tech.meituan.com" title="https://tech.meituan.com" rel="noopener" target="_blank">美团点评技术团队</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-网络基础"><span class="nav-text">1. 网络基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-OSI-7层模型-与-TCP-IP-四层模型"><span class="nav-text">1.1 OSI 7层模型 与 TCP/IP 四层模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-TCP-UDP"><span class="nav-text">1.2 TCP / UDP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-路由协议"><span class="nav-text">1.3 路由协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-HTTP"><span class="nav-text">1.4 HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-get与post"><span class="nav-text">1. get与post</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-session与cookie"><span class="nav-text">2. session与cookie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-http-与-https-的区别"><span class="nav-text">3. http 与 https 的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#一、HTTP"><span class="nav-text">一、HTTP</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#二、HTTPS"><span class="nav-text">二、HTTPS</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-RESTful（Representational-State-Transfer"><span class="nav-text">1.5 RESTful（Representational State Transfer)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-网络安全"><span class="nav-text">1.6 网络安全</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-CSRF-Cross-Site-Request-Forgeries"><span class="nav-text">1. CSRF (Cross-Site Request Forgeries)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-XSS-Cross-Site-Scripting"><span class="nav-text">2. XSS (Cross Site Scripting)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-DDos"><span class="nav-text">3. DDos</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7-socket编程"><span class="nav-text">1.7 socket编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-8-补充"><span class="nav-text">1.8 补充</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结语"><span class="nav-text">结语</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">3Dot141</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Total count: </span>
    
    <span title="Total count">292k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">Many coffee &asymp;</span>
    
    <span title="Many coffee">8:07</span>
  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="Total Visitors">
      <i class="fa fa-free-code-camp"></i>
      hits : <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> ℃ <span>&nbsp; | &nbsp;</span>
    </span>
  

  

  
    <i class="fa fa-clock-o"></i>    
       <span id="sitetime"></span>
   <span id="year" style="display:none">2017</span> 
   <span id="month" style="display:none">09</span>   
   <span id="day" style="display:none">15</span>   
   <span id="hour" style="display:none">0</span>   
   <span id="minute" style="display:none">0</span>   
   <span id="second" style="display:none">0</span>   
	<script language="javascript">
	function siteTime(){        
		window.setTimeout("siteTime()", 1000);
		var seconds = 1000;
		var minutes = seconds * 60;
		var hours = minutes * 60;
		var days = hours * 24;
		var years = days * 365;
		var today = new Date();
		var todayYear = today.getFullYear();
		var todayMonth = today.getMonth()+1;
		var todayDate = today.getDate();
		var todayHour = today.getHours();
		var todayMinute = today.getMinutes();
		var todaySecond = today.getSeconds();
		/* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
		year - 作为date对象的年份，为4位年份值
		month - 0-11之间的整数，做为date对象的月份
		day - 1-31之间的整数，做为date对象的天数
		hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
		minutes - 0-59之间的整数，做为date对象的分钟数
		seconds - 0-59之间的整数，做为date对象的秒数
		microseconds - 0-999之间的整数，做为date对象的毫秒数 */        
		var year = document.getElementById("year").innerHTML;
		var month = document.getElementById("month").innerHTML;
		var day = document.getElementById("day").innerHTML;
		var hour = document.getElementById("hour").innerHTML;
		var minute = document.getElementById("minute").innerHTML;
		var second = document.getElementById("second").innerHTML;//北京时间2018-2-13 00:00:00
		var t1 = Date.UTC(year,month,day,hour,minute,second); 
		var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
		var diff = t2-t1;
		var diffYears = Math.floor(diff/years);
		var diffDays = Math.floor((diff/days)-diffYears*365);
		var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
		var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
		var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
		if(diffYears==0){
		document.getElementById("sitetime").innerHTML=" website has run  "/*+diffYears+" year "*/+diffDays+" days "+diffHours+" h "+diffMinutes+" min "+diffSeconds+" s";
		} else{
		document.getElementById("sitetime").innerHTML=" website has run  "+diffYears+" year "+diffDays+" days "+diffHours+" h "+diffMinutes+" min "+diffSeconds+" s";
		}
	}
	//siteTime(document.getElementById("year").innerHTML,document.getElementById("year").innerHTML,document.getElementById("year").innerHTML,document.getElementById("year").innerHTML,document.getElementById("year").innerHTML,0);
	siteTime();
	</script>
  
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script src="/js/src/utils.js?v=6.6.0"></script>

  <script src="/js/src/motion.js?v=6.6.0"></script>



  
  

  
  <script src="/js/src/scrollspy.js?v=6.6.0"></script>
<script src="/js/src/post-details.js?v=6.6.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>

  <script>
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: true,
        notify: true,
        appId: 'LzTKvYQQYUPQV0KpQNG7SYXz-gzGzoHsz',
        appKey: 'lfgXFgXY0mt2PJxr88qQIeks',
        placeholder: 'Just go go',
        avatar:'mm',
        meta:guest,
        pageSize:'10' || 10,
        visitor: true
    });
  </script>




  

  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      
        // ref: https://github.com/ForbesLindesay/unescape-html
        var unescapeHtml = function(html) {
          return String(html)
            .replace(/&quot;/g, '"')
            .replace(/&#39;/g, '\'')
            .replace(/&#x3A;/g, ':')
            // replace all the other &#x; chars
            .replace(/&#(\d+);/g, function (m, p) { return String.fromCharCode(p); })
            .replace(/&lt;/g, '<')
            .replace(/&gt;/g, '>')
            .replace(/&amp;/g, '&');
        };
      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                content = unescapeHtml(content);
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('-1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  

  
  

  

  
  <script src="/js/src/js.cookie.js?v=6.6.0"></script>
  <script src="/js/src/scroll-cookie.js?v=6.6.0"></script>


  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap');
      $(e).after($wrap);
      $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text();
        }).toArray().join('\n');
        var ta = document.createElement('textarea');
        var range = document.createRange(); //For Chrome
        var sel = window.getSelection(); //For Chrome
        var yPosition = window.pageYOffset || document.documentElement.scrollTop;
        ta.style.top = yPosition + 'px'; //Prevent page scroll
        ta.style.position = 'absolute';
        ta.style.opacity = '0';
        ta.value = code;
        ta.textContent = code; //For FireFox
        ta.contentEditable = true;
        ta.readOnly = false;
        document.body.appendChild(ta);
        range.selectNode(ta);
        sel.removeAllRanges();
        sel.addRange(range);
        ta.setSelectionRange(0, code.length);
        var result = document.execCommand('copy');
        
        ta.blur(); //For iOS
        $(this).blur();
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn');
        setTimeout(function () {
          $b.text('Copy');
        }, 300);
      }).append(e);
    })
  </script>


  

</body>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
</html>
